<!-- public/success.html -->
<div class="text-center py-20">
  <i data-lucide="check-circle" class="w-24 h-24 text-green-400 mx-auto mb-6"></i>
  <h1 class="text-4xl font-bold mb-4">¡Pago Exitoso!</h1>
  <p class="text-gray-400 mb-8">Tu sesión está siendo verificada...</p>
  <div id="downloadSection" class="hidden">
    <h2 class="text-2xl font-semibold mb-4">Descarga tus workflows:</h2>
    <div id="downloadLinks" class="space-y-2"></div>
  </div>
</div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const sessionId = urlParams.get('session_id');
  
  fetch(`/api/verify-session?session_id=${sessionId}`)
    .then(r => r.json())
    .then(data => {
      if (data.success) {
        const section = document.getElementById('downloadSection');
        section.classList.remove('hidden');
        
        data.purchasedItems.forEach(id => {
          // Generar botón de descarga
          document.getElementById('downloadLinks').innerHTML += `
            <a href="/api/download/${id}?token=${data.downloadToken}" 
               class="bg-primary px-6 py-3 rounded-xl inline-block">
              Descargar Workflow ${id}
            </a>
          `;
        });
      }
    });
</script>
